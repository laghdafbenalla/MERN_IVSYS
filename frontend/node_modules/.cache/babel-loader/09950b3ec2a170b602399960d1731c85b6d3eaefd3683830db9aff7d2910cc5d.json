{"ast":null,"code":"// frontend/src/components/AuthComponent.js\nimport React,{useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import'./AuthComponent.css';// Assuming you save this CSS in a file named AuthComponent.css\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AuthComponent=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const handleLogin=async()=>{try{// Make your login request here and obtain the token and redirect path\nconst response=await axios.post('/login',{username,password});const{token,redirect}=response.data;// Store the token securely (e.g., in cookies or local storage)\n// Redirect to the specified path (e.g., '/dashboard')\nhistory.push(redirect);}catch(error){console.error('Login failed',error);setError('Invalid username or password');}};const history=useHistory();const handleRegister=()=>{history.push('/registration');setError('');};const handleLogout=()=>{localStorage.removeItem('token');delete axios.defaults.headers.common['Authorization'];};const handleProtectedRequest=async()=>{try{const response=await axios.get('/dashboard');console.log('Protected response:',response.data);}catch(error){console.error('Protected request failed',error);setError('Authentication failed. Please log in.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form login\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"login__username\",children:[/*#__PURE__*/_jsx(\"svg\",{class:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"#icon-user\"})}),/*#__PURE__*/_jsx(\"span\",{class:\"hidden\",children:\"Username\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"form__input\",placeholder:\"Username\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__field\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"login__password\",children:[/*#__PURE__*/_jsx(\"svg\",{class:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"#icon-lock\"})}),/*#__PURE__*/_jsx(\"span\",{class:\"hidden\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"form__input\",placeholder:\"Password\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form__field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",onClick:handleLogin})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"align\",children:[/*#__PURE__*/_jsxs(\"p\",{class:\"text--center\",children:[\"Not a member? \",/*#__PURE__*/_jsx(\"a\",{href:\"\",onClick:handleRegister,children:\"Sign up now\"}),\" \",/*#__PURE__*/_jsx(\"svg\",{class:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"#icon-arrow-right\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text--center\",style:{color:'red'},children:error})]}),/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",class:\"icons\",children:[/*#__PURE__*/_jsx(\"symbol\",{id:\"icon-arrow-right\",viewBox:\"0 0 1792 1792\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293H245q-52 0-84.5-37.5T128 1024V896q0-53 32.5-90.5T245 768h704L656 474q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z\"})}),/*#__PURE__*/_jsx(\"symbol\",{id:\"icon-lock\",viewBox:\"0 0 1792 1792\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M640 768h512V576q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28H416q-40 0-68-28t-28-68V864q0-40 28-68t68-28h32V576q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z\"})}),/*#__PURE__*/_jsx(\"symbol\",{id:\"icon-user\",viewBox:\"0 0 1792 1792\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M1600 1405q0 120-73 189.5t-194 69.5H459q-121 0-194-69.5T192 1405q0-53 3.5-103.5t14-109T236 1084t43-97.5 62-81 85.5-53.5T538 832q9 0 42 21.5t74.5 48 108 48T896 971t133.5-21.5 108-48 74.5-48 42-21.5q61 0 111.5 20t85.5 53.5 62 81 43 97.5 26.5 108.5 14 109 3.5 103.5zm-320-893q0 159-112.5 271.5T896 896 624.5 783.5 512 512t112.5-271.5T896 128t271.5 112.5T1280 512z\"})})]})]});};export default AuthComponent;","map":{"version":3,"names":["React","useState","axios","useHistory","jsx","_jsx","jsxs","_jsxs","AuthComponent","username","setUsername","password","setPassword","error","setError","handleLogin","response","post","token","redirect","data","history","push","console","handleRegister","handleLogout","localStorage","removeItem","defaults","headers","common","handleProtectedRequest","get","log","className","children","for","class","xlinkHref","type","value","onChange","e","target","placeholder","required","onClick","href","style","color","xmlns","id","viewBox","d"],"sources":["/Users/laghdaf/Documents/ALX/frontend/src/components/AuthComponent.js"],"sourcesContent":["// frontend/src/components/AuthComponent.js\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport './AuthComponent.css'; // Assuming you save this CSS in a file named AuthComponent.css\n\nconst AuthComponent = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n\n  const handleLogin = async () => {\n    try {\n      // Make your login request here and obtain the token and redirect path\n      const response = await axios.post('/login', { username, password });\n      \n      const { token, redirect } = response.data;\n\n      // Store the token securely (e.g., in cookies or local storage)\n\n      // Redirect to the specified path (e.g., '/dashboard')\n      history.push(redirect);\n\n    } catch (error) {\n      console.error('Login failed', error);\n      setError('Invalid username or password');\n    }\n  };\n\n  const history = useHistory();\n\n  const handleRegister = () => {\n    history.push('/registration');\n    setError('');\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    delete axios.defaults.headers.common['Authorization'];\n  };\n\n  const handleProtectedRequest = async () => {\n    try {\n      const response = await axios.get('/dashboard');\n      console.log('Protected response:', response.data);\n    } catch (error) {\n      console.error('Protected request failed', error);\n      setError('Authentication failed. Please log in.');\n    }\n  };\n\n  return (\n    <div className=\"grid\">\n      <div className=\"form login\">\n        <div className=\"form__field\">\n        <label for=\"login__username\"><svg class=\"icon\">\n            <use xlinkHref=\"#icon-user\"></use>\n          </svg><span class=\"hidden\">Username</span></label>\n          <input\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            className=\"form__input\"\n            placeholder=\"Username\"\n            required\n          />\n        </div>\n        <div className=\"form__field\">\n        <label for=\"login__password\"><svg class=\"icon\">\n            <use xlinkHref=\"#icon-lock\"></use>\n          </svg><span class=\"hidden\">Password</span></label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"form__input\"\n            placeholder=\"Password\"\n            required\n          />\n        </div>\n        <div className=\"form__field\">\n          <input type=\"submit\" value=\"Login\" onClick={handleLogin} />\n        </div>\n      </div>\n      <div className=\"align\">\n        <p class=\"text--center\">Not a member? <a href=\"\" onClick={handleRegister} >Sign up now</a> <svg class=\"icon\">  \n          <use xlinkHref=\"#icon-arrow-right\"></use>\n        </svg></p>\n        <p className=\"text--center\" style={{ color: 'red' }}>\n          {error}\n        </p>\n      </div>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icons\">\n        <symbol id=\"icon-arrow-right\" viewBox=\"0 0 1792 1792\">\n          <path d=\"M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293H245q-52 0-84.5-37.5T128 1024V896q0-53 32.5-90.5T245 768h704L656 474q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z\" />\n        </symbol>\n        <symbol id=\"icon-lock\" viewBox=\"0 0 1792 1792\">\n          <path d=\"M640 768h512V576q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28H416q-40 0-68-28t-28-68V864q0-40 28-68t68-28h32V576q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z\" />\n        </symbol>\n        <symbol id=\"icon-user\" viewBox=\"0 0 1792 1792\">\n          <path d=\"M1600 1405q0 120-73 189.5t-194 69.5H459q-121 0-194-69.5T192 1405q0-53 3.5-103.5t14-109T236 1084t43-97.5 62-81 85.5-53.5T538 832q9 0 42 21.5t74.5 48 108 48T896 971t133.5-21.5 108-48 74.5-48 42-21.5q61 0 111.5 20t85.5 53.5 62 81 43 97.5 26.5 108.5 14 109 3.5 103.5zm-320-893q0 159-112.5 271.5T896 896 624.5 783.5 512 512t112.5-271.5T896 128t271.5 112.5T1280 512z\" />\n        </symbol>\n      </svg>\n    </div>\n\n  );\n};\n\nexport default AuthComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}